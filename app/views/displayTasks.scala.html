@(jsonString: String, form: Form[Task])
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script>
      function parseJson() {
        var jsonString = "@jsonString";
        var json = JSON.parse(jsonString.replace(/&quot;/g,'"'));
        var taskNamesDiv = document.getElementsByClassName("taskNames")[0];
        for (i in json) {
            var p = document.createElement("p");
            p.innerHTML = json[i].name;
            taskNamesDiv.appendChild(p);
            taskNamesDiv.appendChild(createCheckbox(i, json));
            taskNamesDiv.appendChild(createDeleteButton(i, json));
        }
      }
        function createCheckbox(i, json) {
            var checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.id = i;
            checkbox.name = "checkbox" + String(i); //not used
            checkbox.onclick = function(i) {
                location.href= json[i].updateLink;
                }.bind(this, i); //prevent outer scope i from overwriting
            if (json[i].status == "true") { //replace with boolean
                checkbox.checked = true;
                }
            else {
                checkbox.checked = false;
                }
            return checkbox;
        }
        function createDeleteButton(i, json) {
            var deleteButton = document.createElement("input");
            deleteButton.type = "button";
            deleteButton.id  = i;
            deleteButton.name = "deleteButton" + String(i);
            deleteButton.value = "Delete Task";
            deleteButton.onclick = function(i) {
                location.href= json[i].updateLink; //replace with delete controller call
            }.bind(this, i);
            return deleteButton
            }

   </script>
</head>
<body onload="parseJson()">
<h3>Task List</h3>
<div class="taskNames"></div>
<h4>Enter new task</h4>
@helper.form(routes.HomeController.createTask) {
@helper.inputText(form("name"), '_label -> "Task Name")

<button type="submit">Add task</button>
}
 @jsonString
</body>
</html>
